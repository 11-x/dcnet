$def with()
<html>
	<head>
		<script language="javascript" src="htdocs/dcn.js"></script>
		<script language="javascript">
function log()
{
	for (let i in arguments) {
		document.write(JSON.stringify(arguments[i], null, 2) + "<br/>");
		console.log(arguments[i]);
	}
}
async function gen_keypair()
{
                 let keypair=await window.crypto.subtle.generateKey({
                         name: "ECDSA",
						 namedCurve: "P-256"
                     },
                     true,
                     ["sign", "verify"]
                 );
return keypair;
}

async function main()
{
	log(typeof crypto);
	for (let key in crypto)
		log(key);
	log(typeof crypto.subtle);
	log("phase II");
	log(typeof window.crypto);
	for (let key in window.crypto)
		log(key);
	log(typeof window.crypto.subtle);
	log("generating");
	let keypair=await gen_keypair();
	log(keypair);
	//log(JSON.stringify(keypair, null, 2));
}
		</script>
	</head>
	<body onload="main();">
	</body>
</html>
